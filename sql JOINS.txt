JOIN

	JOIN IS USED TO COMBINE COLUMNS OF MORE THAN 1 TABLE

		DEPT		EMP
		DNAME		ENAME
		DNAME,LOC	ENAME,JOB


	1. CARTESION PRODUCT
		NATURAL JOIN

			SELECT * FROM A, B
				A  * B
				(3)  (5) = 15 RECORDS


	2. EQUI JOIN

			MATCH THE COLUMN OF TABLE A WITH VALUE WITH ANOTHER COLUMN OF TABLE B

			
	SELECT D.DEPTNO,DNAME,LOC,
               EMPNO,ENAME,JOB,HIREDATE,E.DEPTNO 
               FROM DEPT D,EMP E
                    WHERE D.DEPTNO = E.DEPTNO;



	3. NON-EQUI JOIN


	4. OUTER JOIN

		FIND UNMMATCHED RECORDS

		LEFT OUTER JOIN
	SELECT column_name(s)
	FROM table_name1
	LEFT JOIN table_name2
	ON table_name1.column_name = table_name2.column_name


SELECT AUTHORNAME,CITY, BOOKNAME,BOOKPRICE FROM AUTHORS
LEFT JOIN BOOKS
ON AUTHORS.AUTHORID = BOOKS.AID


		RIGHT OUTER JOIN
SELECT AUTHORNAME,CITY, BOOKNAME,BOOKPRICE FROM AUTHORS
RIGHT JOIN BOOKS
ON AUTHORS.AUTHORID = BOOKS.AID


		FULL OUTER JOIN

SELECT AUTHORNAME,CITY, BOOKNAME,BOOKPRICE FROM AUTHORS
FULL JOIN BOOKS
ON AUTHORS.AUTHORID = BOOKS.AID
		
https://github.com/aswinabraham05/sql/blob/main/joins

CREATE TABLE BOOKS
    (
      BOOKID NUMBER PRIMARY KEY,
      BOOKNAME VARCHAR2(20),
      BOOKPRICE NUMBER,
      AID NUMBER
    );


INSERT INTO BOOKS VALUES (1001,'JAVA11',1500,10);
INSERT INTO BOOKS VALUES (1020,'BE A LEADER',1200,20);
INSERT INTO BOOKS VALUES (1030,'THE 8TH HABIT',1800,NULL);



	5. SELF JOIN

			TABLE JOINING ITSELF


		



1. INSERT
2. UPDATE
3. DELETE

SET AUTOCOMMIT OFF
SET AUTOCOMMIT ON

COMMIT

ROLLBACK

TRUNCATE TABLE TABLENAME

DROP TABLE TABLENAME

RENAME TABLE -- EXPLORE IT
 - RENAME OLDTABLENAME TO NEWTABLENAME
   RENAME EMP TO EMPLOYEE

RENAME COLUMN NAME
    ALTER TABLE EMP
    RENAME COLUMN MGR TO MANAGERCODE;


spool C:\Users\aswin_abraham\data.txt append




CONSTRAINTS
		CAN BE ISSUED


		AT COLUMN LEVEL			VS		TABLE LEVEL
		|
	CREATE TABLE EMP
	(
	   EMPNO NUMBER PRIMARY KEY,
           ENAME ..... 
	   JOB ..... CHECK...
	   SAL  ... CHECK SAL > 50000
	   COMM .... CHECK COMM < SAL
	);




CREATE TABLE MYEMP5
  2  (
  3    EMPNO number,
  4    ename varchar2(20),
  5    job  varchar2(20),
  6    hiredate date,
  7    sal number,
  8    comm number,
  9    deptno number,
 10    PRIMARY KEY (EMPNO),
 11    CHECK (JOB IN ('SALESMAN','MANAGER','CLERK')),
 12    CHECK (SAL > COMM),
 13    CHECK (SAL > 50000),
 14    CHECK (COMM > 500),
 15    FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
 16* )





WHEN JOB WAS ACCOUNTANT ->  check constraint (SYSTEM.SYS_C008409) violated
WHEN SAL < COMM ->          check constraint (SYSTEM.SYS_C008410) violated
WHEN SAL WAS 5000 - >       check constraint (SYSTEM.SYS_C008411) violated
WHEN COMM WAS 400 ->        check constraint (SYSTEM.SYS_C008412) violated
WHEN PK   VIOLATED ->      unique constraint (SYSTEM.SYS_C008413) violated
WHEN DEPTNO AS FK WAS 60-> ORA-02291: integrity constraint (SYSTEM.SYS_C008414) violated - parent key not found



CREATE TABLE MYEMP5
    (
      EMPNO number,
      ename varchar2(20),
      job  varchar2(20),
      hiredate date,
      sal number,
      comm number,
      deptno number,
     PRIMARY KEY (EMPNO),
     CHECK (JOB IN ('SALESMAN','MANAGER','CLERK')),
     CHECK (SAL > COMM),
     CHECK (SAL > 50000),
     CHECK (COMM > 500),
     FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
  )

SELECT CONSTRAINT_NAME,CONSTRAINT_TYPE,SEARCH_CONDITION, STATUS
FROM USER_CONSTRAINTS
WHERE TABLE_NAME='MYEMP5' ORDER BY CONSTRAINT_NAME
/


ALTER TABLE MYEMP5
  DISABLE CONSTRAINT SYS_C008412;

Table altered.

SQL> INSERT INTO MYEMP5
    VALUES (1115,'JACK','SALESMAN','12-JAN-2023',51000,50,20);

1 row created.




SQL> UPDATE MYEMP5 SET COMM=600 WHERE EMPNO=1115;

1 row updated.

SQL> ALTER TABLE MYEMP5
    ENABLE CONSTRAINT SYS_C008412;

Table altered.




SQL> ALTER TABLE MYEMP5
    DROP CONSTRAINT SYS_C008412;

Table altered.

SQL> ALTER TABLE MYEMP5
  2  DISABLE PRIMARY KEY;

Table altered.

SQL> ALTER TABLE MYEMP5
  2  DROP PRIMARY KEY;

Table altered.

SQL> ALTER TABLE MYEMP5
  2  ADD PRIMARY KEY (EMPNO);



CREATE TABLE MYEMP6
    (
      EMPNO number,
      ename varchar2(20),
      job  varchar2(20),
      hiredate date,
      sal number,
      comm number,
      deptno number,
     CONSTRAINT MYPK PRIMARY KEY (EMPNO),
     CONSTRAINT CHECK_JOB CHECK (JOB IN ('SALESMAN','MANAGER','CLERK')),
     CONSTRAINT  SAL_GT_COMM CHECK (SAL > COMM),
     CONSTRAINT  SAL_GT_50K CHECK (SAL > 50000),
     CONSTRAINT COMM_GT_500 CHECK (COMM > 500),
     CONSTRAINT CHECK_FK_DEPTNO FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
  )


COMPOSITE PRIMARY KEY


	STUDENT
	------------
	STD DIV ROLLNO NAME EMAIL AGE
	---------------------------------------
	X   A   1       JACK  ...  15
	X   A   2 	...
	X   B   1 
	IX  A   1
	VII B   1


CREATE TABLE STUDENT
(
   STD VARCHAR2(10),
   DIV VARCHAR2(5),
   ROLLNO NUMBER,
   SNAME VARCHAR2(20) NOT NULL,
   EMAIL VARCHAR2(30) UNIQUE,
   AGE NUMBER CHECK (AGE > 5),
   PRIMARY KEY(STD,DIV,ROLLNO)
)

	STUDENT_MARKS
	--------------------

	<-----FK------------->
	STD	DIV	ROLLNO	SEM	PHY	CHEM	MATHS	TOTAL	PER	GRADE
	--------------------------------------------------------------------------
	X	A	1	I	90	90	90	270	..	..
	X	A	1	II	95	95	95	285	..	..
	X	A	1	III	100	100	100	300	..	..














